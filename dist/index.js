!function(){"use strict";var e="https://apps.pacificamello.com/avonUtilidades/api/v1/";const t=e=>({target:t})=>{const a=Array.from(t.querySelectorAll("option")).find((e=>e.value===t.value));e(a.getAttribute("data-id")||"",a)},a=e=>{const t=document.createElement("option");return t.value="",t.innerHTML=e,t},n=async(t,a,{fromId:n,country:r,defaultLabel:o}={})=>{try{const c=n?`fromId=${n}&country=${r}`:`country=${r}`,i=await fetch(`${e}geography/${a}?${c}`),s=(await i.json()).payload.map((e=>{const t=document.createElement("option");return t.value=e.name,t.innerHTML=e.name,t.setAttribute("data-id",e.id),t}));l(t,o),s.forEach((e=>t.append(e)))}catch(e){console.warm(e)}},l=(e,t)=>{e.innerHTML="",e.append(a(t))},r=e=>{e.forEach((e=>l(e.element,e.defaultLabel)))};const o=async(t,a)=>{try{const n=await fetch(`${e}/representatives/${a}?code=${t}`),{payload:l}=await n.json();return l&&sessionStorage.setItem(`pacifica__${"rep"}`,l),l}catch(e){console.warn(e)}};var c={getRep:o,getRepOnForm:({loading:e,err:t,country:a,form:n,input:l}={},r)=>{n.addEventListener("submit",(async n=>{n.preventDefault();const c=l.value;if(!c)return;e&&(e.style.display="block"),t&&(t.style.display="none");const i=await o(c,a);e&&(e.style.display="none"),t&&!i&&(t.style.display="block"),r(i)}))}};window.pacifica_geo=({country:e,levels:l}={})=>{if(0===l.length)throw new Error("pacifica_geo: should specified at leat 1 scale level");if(l.length>3)throw new Error("pacifica_geo: should specified max 3 scale levels");var o;l.forEach=e=>{e.select.append(a(e.defaultLabel))},o=l[0],n(o.element,"departments",{country:e,defaultLabel:o.defaultLabel}),l[1]&&(l[0].element.addEventListener("change",t(((t,a)=>l=>{if(!l)return r(a);n(t.element,"cities",{fromId:l,country:e,defaultLabel:t.defaultLabel})})(l[1],l.slice(1)))),l[1].element.append(a(l[1].defaultLabel))),l[2]&&(l[1].element.addEventListener("change",t(((t,a)=>l=>{if(!l)return r(a);n(t.element,"towns",{fromId:l,country:e,defaultLabel:t.defaultLabel})})(l[2],l.slice(2)))),l[2].element.append(a(l[2].defaultLabel)))},window.pacifica_rep=c}();